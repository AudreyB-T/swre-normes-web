(()=>{let e=null;var t=function(){document.querySelector(".ulaval-header-mobile-menu").classList.remove("open"),document.querySelector(".ulaval-header-menu-trigger").querySelector("span.screen-reader-text").innerText="Ouvrir le menu principal",document.querySelector(".ulaval-header-menu-trigger").setAttribute("aria-expanded","false"),document.body.classList.remove("ulaval-nav-mobile-open")},r=function(){document.querySelector(".ulaval-header-search").classList.add("remove"),document.querySelector(".ulaval-header-search").classList.remove("open"),document.querySelector(".ulaval-header-search-trigger").setAttribute("aria-expanded","false")},a=function(){e&&(document.getElementById(e.list).hidden=!0,document.querySelector(e.button).setAttribute("aria-expanded","false"),(currentlyFocusedLang=document.querySelector("#"+e.list+">li[aria-selected=true]"))&&currentlyFocusedLang.setAttribute("aria-selected","false"),document.removeEventListener("keyup",i),document.removeEventListener("keydown",c),document.removeEventListener("click",l),document.querySelectorAll("#"+e.list+">li a").forEach((e=>{e.removeEventListener("mouseover",u)}))),e=null},n=function(r,n){triggerButton=document.querySelector(n),"false"==triggerButton.getAttribute("aria-expanded")?(t(),a(),e={list:r,button:n},document.getElementById(r).hidden=!1,triggerButton.setAttribute("aria-expanded","true"),document.querySelector("#"+r+">li:first-child a").focus(),document.querySelector("#"+r+">li:first-child").setAttribute("aria-selected","true"),document.addEventListener("keyup",i),document.addEventListener("keydown",c),document.addEventListener("click",l),document.querySelectorAll("#"+r+">li a").forEach((e=>{e.addEventListener("mouseover",u)}))):a()};document.querySelector(".ulaval-header-menu-trigger").addEventListener("click",(function(){"false"==this.getAttribute("aria-expanded")?((searchBarButton=document.querySelector(".ulaval-header-search-trigger"))&&"true"==searchBarButton.getAttribute("aria-expanded")&&r(),document.querySelector(".ulaval-header-mobile-menu").classList.add("open"),this.querySelector("span.screen-reader-text").innerText="Fermer le menu principal",this.setAttribute("aria-expanded","true"),document.body.classList.add("ulaval-nav-mobile-open")):t()})),(searchBarButton=document.querySelector(".ulaval-header-search-trigger"))&&searchBarButton.addEventListener("click",(function(){"false"==this.getAttribute("aria-expanded")?("true"==document.querySelector(".ulaval-header-menu-trigger").getAttribute("aria-expanded")&&t(),document.querySelector(".ulaval-header-search").classList.add("open"),document.querySelector(".champ-recherche").focus(),this.setAttribute("aria-expanded","true")):r()})),(languageSwitcher=document.querySelector(".ulaval-language-switcher-trigger"))&&languageSwitcher.addEventListener("click",(function(){n("ulaval-language-switcher-list",".ulaval-language-switcher-trigger")})),(secureMenu=document.querySelector(".ulaval-secure-menu-trigger"))&&secureMenu.addEventListener("click",(function(){n("ulaval-secure-menu",".ulaval-secure-menu-trigger")}));var u=function(){document.querySelectorAll("#"+e.list+">li a").forEach((e=>{e==document.activeElement&&e.blur()}))},l=function(t){document.querySelector(e.button).parentElement.contains(t.target)||a()},c=function(e){38!=e.keyCode&&40!=e.keyCode||e.preventDefault()},i=function(t){const r=document.activeElement.parentElement,n=[...r.parentElement.children].indexOf(r);switch(t.keyCode){case 38:r.setAttribute("aria-selected","false"),0==n?(document.querySelector("#"+e.list+" li:last-child a").focus(),document.querySelector("#"+e.list+" li:last-child").setAttribute("aria-selected","true")):(r.previousElementSibling.querySelector("a").focus(),r.previousElementSibling.setAttribute("aria-selected","true"));break;case 40:r.setAttribute("aria-selected","false"),n==[...r.parentElement.children].length-1?(document.querySelector("#"+e.list+" li:first-child a").focus(),document.querySelector("#"+e.list+" li:first-child").setAttribute("aria-selected","true")):(r.nextElementSibling.querySelector("a").focus(),r.nextElementSibling.setAttribute("aria-selected","true"));break;case 27:case 9:document.querySelector(e.button).focus(),a()}};document.addEventListener("animationstart",(function(e){"ulaval-header-search-fadeIn"!==e.animationName&&"ulaval-header-mobile-fadeIn"!==e.animationName||e.target.classList.add("remove")})),document.addEventListener("animationend",(function(e){"ulaval-header-search-fadeOut"!==e.animationName&&"ulaval-header-mobile-fadeOut"!==e.animationName||e.target.classList.remove("remove")}))})();