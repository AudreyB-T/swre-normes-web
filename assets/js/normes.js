(()=>{let e=null;var t=function(){document.querySelector(".ulaval-header-mobile-menu").classList.remove("open"),document.querySelector(".ulaval-header-menu-trigger").querySelector("span.screen-reader-text").innerText="Ouvrir le menu principal",document.querySelector(".ulaval-header-menu-trigger").setAttribute("aria-expanded","false"),document.body.classList.remove("ulaval-nav-mobile-open")},r=function(){document.querySelector(".ulaval-header-search").classList.remove("open"),document.removeEventListener("keydown",o),document.querySelector(".ulaval-header-search-trigger").setAttribute("aria-expanded","false")},a=function(){document.querySelector(".ulaval-header-menu-sous-unite").classList.remove("open"),document.querySelector(".ulaval-header-menu-sous-unite-trigger").setAttribute("aria-expanded","false"),document.querySelector(".ulaval-header-menu-sous-unite-trigger").setAttribute("aria-label","Ouvrir le menu")},n=function(){e&&(document.getElementById(e.list).hidden=!0,document.querySelector(e.button).setAttribute("aria-expanded","false"),(currentlyFocusedLang=document.querySelector("#"+e.list+">li[aria-selected=true]"))&&currentlyFocusedLang.setAttribute("aria-selected","false"),document.removeEventListener("keyup",d),document.removeEventListener("keydown",c),document.removeEventListener("click",i),document.querySelectorAll("#"+e.list+">li a").forEach((e=>{e.removeEventListener("mouseover",l)}))),e=null},u=function(t,r){triggerButton=document.querySelector(r),"false"==triggerButton.getAttribute("aria-expanded")?(s(),e={list:t,button:r},document.getElementById(t).hidden=!1,triggerButton.setAttribute("aria-expanded","true"),document.querySelector("#"+t+">li:first-child a").focus(),document.querySelector("#"+t+">li:first-child").setAttribute("aria-selected","true"),document.addEventListener("keyup",d),document.addEventListener("keydown",c),document.addEventListener("click",i),document.querySelectorAll("#"+t+">li a").forEach((e=>{e.addEventListener("mouseover",l)}))):n()};document.querySelector(".ulaval-header-menu-trigger").addEventListener("click",(function(){"false"==this.getAttribute("aria-expanded")?(s(),document.querySelector(".ulaval-header-mobile-menu").classList.add("open"),this.querySelector("span.screen-reader-text").innerText="Fermer le menu principal",this.setAttribute("aria-expanded","true"),document.body.classList.add("ulaval-nav-mobile-open")):t()})),(searchBarButton=document.querySelector(".ulaval-header-search-trigger"))&&searchBarButton.addEventListener("click",(function(){"false"==this.getAttribute("aria-expanded")?(s(),document.querySelector(".ulaval-header-search").classList.add("open"),document.querySelector(".champ-recherche").focus(),document.addEventListener("keydown",o),this.setAttribute("aria-expanded","true")):r()})),(languageSwitcher=document.querySelector(".ulaval-language-switcher-trigger"))&&languageSwitcher.addEventListener("click",(function(){u("ulaval-language-switcher-list",".ulaval-language-switcher-trigger")})),(secureMenu=document.querySelector(".ulaval-secure-menu-trigger"))&&secureMenu.addEventListener("click",(function(){u("ulaval-secure-menu",".ulaval-secure-menu-trigger")})),(sousUniteTrigger=document.querySelector(".ulaval-header-menu-sous-unite-trigger"))&&sousUniteTrigger.addEventListener("click",(function(){"false"==this.getAttribute("aria-expanded")?(s(),document.querySelector(".ulaval-header-menu-sous-unite").classList.add("open"),this.setAttribute("aria-label","Fermer le menu"),this.setAttribute("aria-expanded","true")):a()}));var l=function(){document.querySelectorAll("#"+e.list+">li a").forEach((e=>{e==document.activeElement&&e.blur()}))},i=function(t){document.querySelector(e.button).parentElement.contains(t.target)||n()},c=function(e){38!=e.keyCode&&40!=e.keyCode||e.preventDefault()},o=function(e){document.activeElement==document.querySelector(".champ-recherche")&&e.shiftKey&&9==e.keyCode&&(document.querySelector(".ulaval-header-search-trigger").focus(),e.preventDefault())},d=function(t){const r=document.activeElement.parentElement,a=[...r.parentElement.children].indexOf(r);switch(t.keyCode){case 38:r.setAttribute("aria-selected","false"),0==a?(document.querySelector("#"+e.list+" li:last-child a").focus(),document.querySelector("#"+e.list+" li:last-child").setAttribute("aria-selected","true")):(r.previousElementSibling.querySelector("a").focus(),r.previousElementSibling.setAttribute("aria-selected","true"));break;case 40:r.setAttribute("aria-selected","false"),a==[...r.parentElement.children].length-1?(document.querySelector("#"+e.list+" li:first-child a").focus(),document.querySelector("#"+e.list+" li:first-child").setAttribute("aria-selected","true")):(r.nextElementSibling.querySelector("a").focus(),r.nextElementSibling.setAttribute("aria-selected","true"));break;case 27:case 9:document.querySelector(e.button).focus(),n()}},s=function(){t(),n(),document.querySelector(".ulaval-header-search-trigger")&&r(),document.querySelector(".ulaval-header-menu-sous-unite")&&a()};document.addEventListener("animationstart",(function(e){"ulaval-header-search-fadeIn"!==e.animationName&&"ulaval-header-mobile-fadeIn"!==e.animationName&&"ulaval-header-sous-unite-fadeIn"!==e.animationName||e.target.classList.add("remove")})),document.addEventListener("animationend",(function(e){"ulaval-header-search-fadeOut"!==e.animationName&&"ulaval-header-mobile-fadeOut"!==e.animationName&&"ulaval-header-sous-unite-fadeOut"!==e.animationName||e.target.classList.remove("remove")}))})();