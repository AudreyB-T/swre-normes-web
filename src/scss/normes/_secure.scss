// Importation du fichier global
@import "./abstracts/_global_abstracts.scss";

// Styles
:root {
    --img-secure: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='m0,8C0,3.58,3.58,0,8,0s8,3.58,8,8-3.58,8-8,8C3.58,16,0,12.42,0,8Zm8,6.22c1.17,0,2.31-.33,3.3-.95-1.7-1.83-4.56-1.94-6.39-.24-.08.07-.15.15-.23.23.99.63,2.14.96,3.32.96Zm3.26-3.25c.52.32.99.7,1.39,1.15,2.28-2.57,2.04-6.5-.53-8.78S5.63,1.3,3.35,3.87c-2.08,2.35-2.09,5.88-.02,8.23,2.04-2.22,5.36-2.7,7.94-1.13h0Zm-6.26-4.3c0-1.66,1.34-3,3-3s3,1.34,3,3-1.34,3-3,3-3-1.34-3-3Zm1.48,0c0,.84.68,1.52,1.52,1.51.84,0,1.52-.68,1.51-1.52,0-.84-.68-1.51-1.52-1.51-.84,0-1.52.68-1.52,1.52h0Z' fill='%23040405'/%3E%3C/svg%3E");
    --img-secure-logged: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 15.73 15.73'%3E%3Cpath d='m8,0c4.34.07,7.81,3.65,7.74,7.99-.07,4.34-3.65,7.81-7.99,7.74C3.39,15.66-.07,12.08,0,7.74c0,0,0,0,0,0C.08,3.39,3.66-.07,8,0Z' fill='%23040405'/%3E%3Cpath d='m7.93,3.61c1.63.03,2.93,1.37,2.9,3-.03,1.63-1.37,2.93-3,2.9-1.63-.03-2.93-1.37-2.9-3,0,0,0,0,0,0,.03-1.63,1.37-2.92,3-2.9Zm-.08,4.44c.82.01,1.5-.64,1.52-1.47s-.64-1.5-1.47-1.52c-.82-.01-1.5.64-1.52,1.47-.01.82.64,1.5,1.47,1.52Z' fill='%23fff'/%3E%3Cpath d='m10.97,13.12h0c-.27-.31-.58-.58-.92-.8-.7-.46-1.51-.7-2.35-.7-1.2,0-2.34.5-3.16,1.37-.49-.33-.92-.73-1.29-1.19,1.15-1.25,2.76-1.96,4.45-1.97,1.16,0,2.3.34,3.27.98.5.32.95.72,1.33,1.18-.39.44-.84.82-1.34,1.12Z' fill='%23fff'/%3E%3C/svg%3E");
}

.ulaval-i-login {
    background-image: var(--img-secure);
    display: block;
}

.ulaval-i-secure-logged {
    background-image: var(--img-secure-logged);
    display: block;
}

.ulaval-secure-login {
    display: block;
    padding: 1em;
    line-height: 1rem;
    color: var(--ul-color-black);
    &:hover, &:active {
        background-color: var(--ul-color-black);
        i {
            filter: invert(1);
        }
    }
}

button.ulaval-secure-menu-trigger {
    border: 0;
    background: none;
    padding: 1rem 0.591rem;
    color: var(--ul-color-black);
    box-sizing: border-box;
    line-height: 1rem;
    display: flex;
    align-items: center;
    &:after {
        display: inline-block;
        width: 13px;
        height: 7px;
        content: "";
        background-image: var(--img-dropdown-arrow);
        background-size: 13px 7px;
        margin-left: 4px;
    }
    &:hover,
    &:active,
    &[aria-expanded="true"] {
        background-color: var(--ul-color-black);
        &:after {
            filter: invert(1);
        }
        .ulaval-i-secure-logged {
            background-image: var(--img-secure);
            filter: invert(1);
        }
    }
    &[aria-expanded="true"]:after {
        transform: scaleY(-1);
    }
}

nav.ulaval-secure-menu-container {
    position: relative;
    #ulaval-secure-menu {
        position: absolute;
        background-color: var(--ul-color-black);
        color: var(--ul-color-white);
        top: 100%;
        right: 0;
        margin: 0;
        padding: 0;
        list-style: none;
        border: 1px var(--ul-color-black) solid;
        white-space: nowrap;
        z-index: 1;
        li {
            &:not(:first-child) {
                border-top: 1px var(--ul-color-grey) solid;
            }
            a {
                display: block;
                color: var(--ul-color-white);
                padding: 0.591rem;
                box-sizing: border-box;
                line-height: 1rem;
                font-size: 0.875rem;
                text-decoration: none;
                &:not(.ulaval-secure-logout) {
                    font-weight: 600;
                }
                &:hover {
                    color: var(--ul-color-black);
                    background-color: var(--ul-color-white);
                    text-decoration: underline;
                }
                &:focus,
                &:focus-visible {
                    outline: 1px color(--ul-color-black) solid;
                    background-color: var(--ul-color-white);
                    color: var(--ul-color-black);
                    outline-offset: 2px;
                }
                &:active {
                    color: var(--ul-color-black);
                    background-color: var(--ul-color-white);
                    text-decoration: underline;
                }
            }
        }
    }
}

// Changements de couleur une fois le menu mobile ouvert
@media (max-width: $ul-mobile-width) {
    .ulaval-nav-mobile-open {
        button.ulaval-secure-menu-trigger {
            i {
                transition: filter 0.5s ease;
                background-image: var(--img-secure);
                filter: invert(1);
            }
            &:after {
                filter: invert(1);
            }
            &:hover, &:active {
                background-color: var(--ul-color-white);
                i {
                    background-image: var(--img-secure-logged);
                    transition: none;
                    filter: none;
                }
                &:after {
                    filter: none;
                }
            }
        }
        .ulaval-secure-login {
            color: var(--ul-color-white);
            i {
                transition: filter 0.5s ease;
                filter: invert(1);
            }
            &:hover, &:active {
                background-color: var(--ul-color-white);
                i {
                    transition: none;
                    filter: none;
                }
            }
        }
    }
}