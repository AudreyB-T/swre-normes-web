{"version":3,"file":"../normes_ul.js","names":["mainHeader","document","querySelector","body","style","setProperty","clientHeight","window","innerWidth","clientWidth","closeMainMenu","classList","remove","innerText","setAttribute","closeMainSearch","add","addEventListener","this","getAttribute","searchBarButton","focus","languageSwitcher","getElementById","hidden","languageSwitcherKeys","removeEventListener","e","currentFocus","activeElement","parentElement","currentIndex","children","indexOf","console","log","keyCode","previousElementSibling","length","nextElementSibling","animationName","target"],"sources":["normes_ul.js"],"sourcesContent":["//Hauteur calculée de l'en-tête (pour calculer la hauteur du menu)\nconst mainHeader=document.querySelector(\"header.ulaval-header\");\ndocument.body.style.setProperty(\n  \"--header-height\",\n  `${mainHeader.clientHeight}px`\n);\n\n// Largeur calculée de la scrollbar\ndocument.body.style.setProperty(\n  \"--scrollbar-width\",\n  `${(window.innerWidth - document.body.clientWidth) / 2}px`\n);\n\n// Fermeture du menu\nvar closeMainMenu=function(){\n  document.querySelector(\".ulaval-header-mobile-menu\").classList.remove(\"open\");\n  document.querySelector(\".ulaval-header-menu-trigger\").querySelector(\"span.screen-reader-text\").innerText=\"Ouvrir le menu principal\";\n  document.querySelector(\".ulaval-header-menu-trigger\").setAttribute(\"aria-expanded\",\"false\");\n  document.body.classList.remove(\"ulaval-nav-mobile-open\");\n}\n\n// Fermeture du moteur de recherche\nvar closeMainSearch=function(){\n  document.querySelector(\".ulaval-header-search\").classList.add(\"remove\");\n  document.querySelector(\".ulaval-header-search\").classList.remove(\"open\");\n  document.querySelector(\".ulaval-header-search-trigger\").setAttribute(\"aria-expanded\",\"false\");\n}\n\n//Comportement du bouton de menu mobile\ndocument.querySelector(\".ulaval-header-menu-trigger\").addEventListener(\"click\",function(){\n    if(this.getAttribute(\"aria-expanded\")==\"false\"){\n      if(searchBarButton=document.querySelector(\".ulaval-header-search-trigger\")){\n        if(searchBarButton.getAttribute(\"aria-expanded\")==\"true\"){\n          closeMainSearch();\n        }\n      }\n\n      document.querySelector(\".ulaval-header-mobile-menu\").classList.add(\"open\");\n      this.querySelector(\"span.screen-reader-text\").innerText=\"Fermer le menu principal\";\n      this.setAttribute(\"aria-expanded\",\"true\");\n      document.body.classList.add(\"ulaval-nav-mobile-open\");\n    }\n    else{\n      closeMainMenu();\n    }\n  });\n\n\n \n//Comportement du bouton du moteur de recherche principal\nif(searchBarButton=document.querySelector(\".ulaval-header-search-trigger\")){\nsearchBarButton.addEventListener(\"click\",function(){\n    if(this.getAttribute(\"aria-expanded\")==\"false\"){\n      if(document.querySelector(\".ulaval-header-menu-trigger\").getAttribute(\"aria-expanded\")==\"true\"){\n        closeMainMenu();\n      }\n    document.querySelector(\".ulaval-header-search\").classList.add(\"open\");\n    document.querySelector(\".champ-recherche\").focus();\n    this.setAttribute(\"aria-expanded\",\"true\");\n    }\n    else{\n      closeMainSearch();\n    }\n});\n}\n\n// Comportement du sélecteur de langue\nif(languageSwitcher = document.querySelector(\".ulaval-language-switcher-trigger\")){\n  languageSwitcher.addEventListener(\"click\",function(){\n    if(this.getAttribute(\"aria-expanded\")==\"false\"){\n      document.getElementById(\"ulaval-language-switcher-list\").hidden=false;\n      this.setAttribute(\"aria-expanded\",\"true\");\n      document.querySelector(\"#ulaval-language-switcher-list>li:first-child a\").focus();\n      document.addEventListener('keyup', languageSwitcherKeys);\n      }\n      else{\n        document.getElementById(\"ulaval-language-switcher-list\").hidden=true;\n        this.setAttribute(\"aria-expanded\",\"false\");\n        document.removeEventListener('keyup', languageSwitcherKeys);\n      }\n  });\n}\n\n// Détection des touches pour la navigation du sélecteur de langue par clavier\nvar languageSwitcherKeys=function(e){\n  const currentFocus=document.activeElement.parentElement;\n  const currentIndex=[...currentFocus.parentElement.children].indexOf(currentFocus);\n  console.log(currentIndex);\n  switch(e.keyCode){\n    case 38: //Up\n      if(currentIndex==0){\n        document.querySelector(\"#ulaval-language-switcher-list li:last-child a\").focus();\n      }\n      else{\n          currentFocus.previousElementSibling.querySelector(\"a\").focus();\n      }\n      break;\n    case 40: //Down\n      if(currentIndex==([...currentFocus.parentElement.children].length-1)){\n        document.querySelector(\"#ulaval-language-switcher-list li:first-child a\").focus();\n      }\n      else{\n          currentFocus.nextElementSibling.querySelector(\"a\").focus();\n      }\n      break;\n    case 27: //Escape\n    case 9: //Tab\n      document.getElementById(\"ulaval-language-switcher-list\").hidden=true;\n      document.querySelector(\".ulaval-language-switcher-trigger\").focus();\n      document.querySelector(\".ulaval-language-switcher-trigger\").setAttribute(\"aria-expanded\",\"false\");\n      document.removeEventListener('keyup', languageSwitcherKeys);\n      break;\n  }\n}\n\n// Ajout/retrait de certaines classes durant les périodes d'animation pour aider à la fluidité\ndocument.addEventListener('animationstart', function (e) {\nif (e.animationName === 'ulaval-header-search-fadeIn' || e.animationName === 'ulaval-header-mobile-fadeIn') {\n    e.target.classList.add('remove');\n}\n});\ndocument.addEventListener('animationend', function (e) {\nif (e.animationName === 'ulaval-header-search-fadeOut' || e.animationName === 'ulaval-header-mobile-fadeOut') {\n    e.target.classList.remove('remove');\n    }\n});"],"mappings":"AACA,MAAMA,WAAWC,SAASC,cAAc,wBACxCD,SAASE,KAAKC,MAAMC,YAClB,kBACA,GAAGL,WAAWM,kBAIhBL,SAASE,KAAKC,MAAMC,YAClB,qBACIE,OAAOC,WAAaP,SAASE,KAAKM,aAAe,EAArD,MAIF,IAAIC,cAAc,WAChBT,SAASC,cAAc,8BAA8BS,UAAUC,OAAO,QACtEX,SAASC,cAAc,+BAA+BA,cAAc,2BAA2BW,UAAU,2BACzGZ,SAASC,cAAc,+BAA+BY,aAAa,gBAAgB,SACnFb,SAASE,KAAKQ,UAAUC,OAAO,yBACjC,EAGIG,gBAAgB,WAClBd,SAASC,cAAc,yBAAyBS,UAAUK,IAAI,UAC9Df,SAASC,cAAc,yBAAyBS,UAAUC,OAAO,QACjEX,SAASC,cAAc,iCAAiCY,aAAa,gBAAgB,QACvF,EAGAb,SAASC,cAAc,+BAA+Be,iBAAiB,SAAQ,WACpC,SAApCC,KAAKC,aAAa,mBAChBC,gBAAgBnB,SAASC,cAAc,mCACU,QAA/CkB,gBAAgBD,aAAa,kBAC9BJ,kBAIJd,SAASC,cAAc,8BAA8BS,UAAUK,IAAI,QACnEE,KAAKhB,cAAc,2BAA2BW,UAAU,2BACxDK,KAAKJ,aAAa,gBAAgB,QAClCb,SAASE,KAAKQ,UAAUK,IAAI,2BAG5BN,eAEJ,KAKCU,gBAAgBnB,SAASC,cAAc,mCAC1CkB,gBAAgBH,iBAAiB,SAAQ,WACE,SAApCC,KAAKC,aAAa,kBACqE,QAArFlB,SAASC,cAAc,+BAA+BiB,aAAa,kBACpET,gBAEJT,SAASC,cAAc,yBAAyBS,UAAUK,IAAI,QAC9Df,SAASC,cAAc,oBAAoBmB,QAC3CH,KAAKJ,aAAa,gBAAgB,SAGhCC,iBAEN,KAIGO,iBAAmBrB,SAASC,cAAc,uCAC3CoB,iBAAiBL,iBAAiB,SAAQ,WACD,SAApCC,KAAKC,aAAa,kBACnBlB,SAASsB,eAAe,iCAAiCC,QAAO,EAChEN,KAAKJ,aAAa,gBAAgB,QAClCb,SAASC,cAAc,mDAAmDmB,QAC1EpB,SAASgB,iBAAiB,QAASQ,wBAGjCxB,SAASsB,eAAe,iCAAiCC,QAAO,EAChEN,KAAKJ,aAAa,gBAAgB,SAClCb,SAASyB,oBAAoB,QAASD,sBAE5C,IAIF,IAAIA,qBAAqB,SAASE,GAChC,MAAMC,EAAa3B,SAAS4B,cAAcC,cACpCC,EAAa,IAAIH,EAAaE,cAAcE,UAAUC,QAAQL,GAEpE,OADAM,QAAQC,IAAIJ,GACLJ,EAAES,SACP,KAAK,GACc,GAAdL,EACD9B,SAASC,cAAc,kDAAkDmB,QAGvEO,EAAaS,uBAAuBnC,cAAc,KAAKmB,QAE3D,MACF,KAAK,GACAU,GAAe,IAAIH,EAAaE,cAAcE,UAAUM,OAAO,EAChErC,SAASC,cAAc,mDAAmDmB,QAGxEO,EAAaW,mBAAmBrC,cAAc,KAAKmB,QAEvD,MACF,KAAK,GACL,KAAK,EACHpB,SAASsB,eAAe,iCAAiCC,QAAO,EAChEvB,SAASC,cAAc,qCAAqCmB,QAC5DpB,SAASC,cAAc,qCAAqCY,aAAa,gBAAgB,SACzFb,SAASyB,oBAAoB,QAASD,sBAG5C,EAGAxB,SAASgB,iBAAiB,kBAAkB,SAAUU,GAC9B,gCAApBA,EAAEa,eAAuE,gCAApBb,EAAEa,eACvDb,EAAEc,OAAO9B,UAAUK,IAAI,SAE3B,IACAf,SAASgB,iBAAiB,gBAAgB,SAAUU,GAC5B,iCAApBA,EAAEa,eAAwE,iCAApBb,EAAEa,eACxDb,EAAEc,OAAO9B,UAAUC,OAAO,SAE9B"}