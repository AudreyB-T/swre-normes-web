{"version":3,"file":"../normes_ul.js","names":["closeMainMenu","document","querySelector","classList","remove","innerText","setAttribute","body","closeMainSearch","add","closeLanguageSwitcher","getElementById","hidden","currentlyFocusedLang","removeEventListener","languageSwitcherKeys","preventScrollOnNavKeyDowns","detectClickOutside","querySelectorAll","forEach","item","blurSwitcherItems","addEventListener","this","getAttribute","searchBarButton","focus","languageSwitcher","e","activeElement","blur","contains","target","keyCode","preventDefault","currentFocus","parentElement","currentIndex","children","indexOf","previousElementSibling","length","nextElementSibling","animationName"],"sources":["normes_ul.js"],"sourcesContent":["// Fermeture du menu\nvar closeMainMenu=function(){\n  document.querySelector(\".ulaval-header-mobile-menu\").classList.remove(\"open\");\n  document.querySelector(\".ulaval-header-menu-trigger\").querySelector(\"span.screen-reader-text\").innerText=\"Ouvrir le menu principal\";\n  document.querySelector(\".ulaval-header-menu-trigger\").setAttribute(\"aria-expanded\",\"false\");\n  document.body.classList.remove(\"ulaval-nav-mobile-open\");\n}\n\n// Fermeture du moteur de recherche\nvar closeMainSearch=function(){\n  document.querySelector(\".ulaval-header-search\").classList.add(\"remove\");\n  document.querySelector(\".ulaval-header-search\").classList.remove(\"open\");\n  document.querySelector(\".ulaval-header-search-trigger\").setAttribute(\"aria-expanded\",\"false\");\n}\n\n// Fermeture du sélecteur de langue\nvar closeLanguageSwitcher=function(){\n  document.getElementById(\"ulaval-language-switcher-list\").hidden=true;\n  document.querySelector(\".ulaval-language-switcher-trigger\").setAttribute(\"aria-expanded\",\"false\");\n  if(currentlyFocusedLang=document.querySelector(\"#ulaval-language-switcher-list>li[aria-selected=true]\")){\n    currentlyFocusedLang.setAttribute(\"aria-selected\",\"false\");\n  }\n  document.removeEventListener('keyup', languageSwitcherKeys);\n  document.removeEventListener('keydown', preventScrollOnNavKeyDowns);\n  document.removeEventListener('click', detectClickOutside);\n  const switcherItems = document.querySelectorAll(\"#ulaval-language-switcher-list>li a\");\n      switcherItems.forEach(item=>{\n        item.removeEventListener(\"mouseover\",blurSwitcherItems);\n      });\n}\n\n//Comportement du bouton de menu mobile\ndocument.querySelector(\".ulaval-header-menu-trigger\").addEventListener(\"click\",function(){\n    if(this.getAttribute(\"aria-expanded\")==\"false\"){\n      if(searchBarButton=document.querySelector(\".ulaval-header-search-trigger\")){\n        if(searchBarButton.getAttribute(\"aria-expanded\")==\"true\"){\n          closeMainSearch();\n        }\n      }\n\n      document.querySelector(\".ulaval-header-mobile-menu\").classList.add(\"open\");\n      this.querySelector(\"span.screen-reader-text\").innerText=\"Fermer le menu principal\";\n      this.setAttribute(\"aria-expanded\",\"true\");\n      document.body.classList.add(\"ulaval-nav-mobile-open\");\n    }\n    else{\n      closeMainMenu();\n    }\n  });\n\n\n \n//Comportement du bouton du moteur de recherche principal\nif(searchBarButton=document.querySelector(\".ulaval-header-search-trigger\")){\nsearchBarButton.addEventListener(\"click\",function(){\n    if(this.getAttribute(\"aria-expanded\")==\"false\"){\n      if(document.querySelector(\".ulaval-header-menu-trigger\").getAttribute(\"aria-expanded\")==\"true\"){\n        closeMainMenu();\n      }\n    document.querySelector(\".ulaval-header-search\").classList.add(\"open\");\n    document.querySelector(\".champ-recherche\").focus();\n    this.setAttribute(\"aria-expanded\",\"true\");\n    }\n    else{\n      closeMainSearch();\n    }\n});\n}\n\n// Comportement du sélecteur de langue\nif(languageSwitcher = document.querySelector(\".ulaval-language-switcher-trigger\")){\n  languageSwitcher.addEventListener(\"click\",function(){\n    if(this.getAttribute(\"aria-expanded\")==\"false\"){\n      document.getElementById(\"ulaval-language-switcher-list\").hidden=false;\n      this.setAttribute(\"aria-expanded\",\"true\");\n      document.querySelector(\"#ulaval-language-switcher-list>li:first-child a\").focus();\n      document.querySelector(\"#ulaval-language-switcher-list>li:first-child\").setAttribute(\"aria-selected\",\"true\");\n      document.addEventListener('keyup', languageSwitcherKeys);\n      document.addEventListener('keydown', preventScrollOnNavKeyDowns);\n      document.addEventListener('click', detectClickOutside);\n      const switcherItems = document.querySelectorAll(\"#ulaval-language-switcher-list>li a\");\n      switcherItems.forEach(item=>{\n        item.addEventListener(\"mouseover\",blurSwitcherItems);\n      });\n      }\n      else{\n        closeLanguageSwitcher();\n      }\n  });\n}\n\nvar blurSwitcherItems=function(e){\n  const switcherItems = document.querySelectorAll(\"#ulaval-language-switcher-list>li a\");\n  switcherItems.forEach(item=>{\n    if(item==document.activeElement){\n      item.blur();\n    }\n  });\n}\n\nvar detectClickOutside=function(e){\n  if(!document.querySelector(\".ulaval-language-switcher\").contains(e.target)){\n    closeLanguageSwitcher();\n  }\n}\n\n// Prévient le scroll down lorsque nous sommes en train de sélectionner une langue avec les flèches\nvar preventScrollOnNavKeyDowns=function(e){\n  if (e.keyCode == 38 || e.keyCode == 40) {\n    e.preventDefault();\n}\n}\n\n// Détection des touches pour la navigation du sélecteur de langue par clavier\nvar languageSwitcherKeys=function(e){\n  const currentFocus=document.activeElement.parentElement;\n  const currentIndex=[...currentFocus.parentElement.children].indexOf(currentFocus);\n  switch(e.keyCode){\n    case 38: //Up\n      currentFocus.setAttribute(\"aria-selected\",\"false\");\n      if(currentIndex==0){\n        document.querySelector(\"#ulaval-language-switcher-list li:last-child a\").focus();\n        document.querySelector(\"#ulaval-language-switcher-list li:last-child\").setAttribute(\"aria-selected\",\"true\");\n      }\n      else{\n          currentFocus.previousElementSibling.querySelector(\"a\").focus();\n          currentFocus.previousElementSibling.setAttribute(\"aria-selected\",\"true\");\n      }\n      break;\n    case 40: //Down\n      currentFocus.setAttribute(\"aria-selected\",\"false\");\n      if(currentIndex==([...currentFocus.parentElement.children].length-1)){\n        document.querySelector(\"#ulaval-language-switcher-list li:first-child a\").focus();\n        document.querySelector(\"#ulaval-language-switcher-list li:first-child\").setAttribute(\"aria-selected\",\"true\");\n      }\n      else{\n          currentFocus.nextElementSibling.querySelector(\"a\").focus();\n          currentFocus.nextElementSibling.setAttribute(\"aria-selected\",\"true\");\n      }\n      break;\n    case 27: //Escape\n    case 9: //Tab\n      closeLanguageSwitcher();\n      document.querySelector(\".ulaval-language-switcher-trigger\").focus();\n      break;\n  }\n}\n\n// Ajout/retrait de certaines classes durant les périodes d'animation pour aider à la fluidité\ndocument.addEventListener('animationstart', function (e) {\nif (e.animationName === 'ulaval-header-search-fadeIn' || e.animationName === 'ulaval-header-mobile-fadeIn') {\n    e.target.classList.add('remove');\n}\n});\ndocument.addEventListener('animationend', function (e) {\nif (e.animationName === 'ulaval-header-search-fadeOut' || e.animationName === 'ulaval-header-mobile-fadeOut') {\n    e.target.classList.remove('remove');\n    }\n});"],"mappings":"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"}